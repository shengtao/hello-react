# react 里使用 redux

## 一些概念 (terms)

`container componnets`

```
# container => component
StockWidgetContainer => StockWidget
TagCloudContainer => TagCloud
PartyPooperListContainer => PartyPooperList
```

- A container does data fetching and then renders its corresponding sub-componnent.
- A container separates our data-fetching and rendering concerns.
- A container makes its corresponding component reusable.
- A container gives its corresponding component the ability to set PropTypes and fail loudly.

demo:

```javascript
// functional defined component
const CommentList = props =>
    <ul>
        {props.comments.map(c => (
            <li>{c.body}—{c.author}</li>
        ))}
    </ul>

// This is just a placeholder for a real request
const fetchSomeComments = cb =>
  cb([
    { author: "Chan", body: "You look nice today." },
    { author: "You", body: "I know, right?!" }
  ]);

// class defined component container
class CommentListContainer extends React.Component{
    state = {comments: []};

    componentDidMount() {
        fetchSomeComments(comments =>
            this.setState({ comments: comments }));
    }

    render() {
        return <CommentList comments={this.state.comments} />
    }
}
```

`presentational components vs container components`

**presentational components**

- Are concerned with how things look.
- May contain both presentational and container components inside, and usually have some DOM markup and styles of their own.
- Often allow containment via this.props.children.
- Have no dependencies on the rest of the app, such as Flux actions or stores.
- Don’t specify how the data is loaded or mutated
- Receive data and callbacks exclusively via props.
- Rarely have their own state (when they do, it’s UI state rather than data).
- Are written as functional components unless they need state, lifecycle hooks, or performance optimizations.
- Examples: Page, Sidebar, Story, UserInfo, List.

**container components**

- Are concerned with how things work.
- May contain both presentational and container components inside but usually don’t have any DOM markup of their own except for some wrapping divs, and never have any styles.
- Provide the data and behavior to presentational or other container components.
- Call Flux actions and provide these as callbacks to the presentational components.
- Are often stateful, as they tend to serve as data sources.
- Are usually generated using higher order components
- Examples: UserPage, FollowersSidebar, StoryContainer, FollowedUserList

**这样做的好处**

- Better separation of concerns.
- Better reusability.
- Presentational components are essentially your app’s “palette”. UI部分独立
- This forces you to extract “layout components”. 布局component需要被抽离

**二者的区别**

concern item（考虑点） | presentational components | container components
----|------|----
purpose （主要用途） | How things look (markup, styles)  | how things work（data fetching, state updates）
aware of redux(redux 相关) | No  | Yes
to read data | read data from props （read-only）  | subscribe to redux state
to change data | invoke callbacks from props （refs ？？？） | dispatch redux actions
are written | by hand | usually generated by react redux


## 参考资料

- [Container Components](https://medium.com/@learnreact/container-components-c0e67432e005)
- [Presentational and Container Components](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)